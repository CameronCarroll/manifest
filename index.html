<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RTS Game</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #000;
    }
    canvas {
      display: block;
    }
    #ui-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    #save-load-panel {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px;
      border-radius: 5px;
      pointer-events: auto;
    }
    button {
      background-color: #4CAF50;
      border: none;
      color: white;
      padding: 5px 10px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 14px;
      margin: 2px;
      cursor: pointer;
      border-radius: 3px;
    }
    #save-list {
      max-height: 150px;
      overflow-y: auto;
      margin-top: 5px;
    }
    .save-item {
      padding: 3px;
      cursor: pointer;
      border-bottom: 1px solid #444;
    }
    .save-item:hover {
      background-color: #333;
    }
  </style>
</head>
<body>
  <div id="ui-container">
    <div id="save-load-panel">
      <button id="save-game">Save Game</button>
      <button id="load-game">Load Game</button>
      <div id="save-list" style="display: none;"></div>
    </div>
  </div>

  <script type="module" src="/src/index.js"></script>
  <script>
    // UI controls for save/load functionality
    document.addEventListener('DOMContentLoaded', () => {
      const saveButton = document.getElementById('save-game');
      const loadButton = document.getElementById('load-game');
      const saveList = document.getElementById('save-list');
      
      saveButton.addEventListener('click', async () => {
        // Simple implementation - in a real game, you'd have a proper UI for naming saves
        const saveName = prompt('Enter a name for your save:', 'My Save');
        
        if (saveName) {
          try {
            await window.game.saveGame(saveName);
            alert('Game saved successfully!');
          } catch (error) {
            alert('Failed to save game: ' + error.message);
          }
        }
      });
      
      loadButton.addEventListener('click', async () => {
        try {
          const saves = await window.game.getSaveList();
          
          if (saves.length === 0) {
            alert('No saved games found!');
            return;
          }
          
          // Display save list
          saveList.innerHTML = '';
          saves.forEach(save => {
            const saveItem = document.createElement('div');
            saveItem.className = 'save-item';
            saveItem.textContent = `${save.name} (${new Date(save.timestamp).toLocaleString()})`;
            saveItem.addEventListener('click', async () => {
              try {
                await window.game.loadGame(save.id);
                saveList.style.display = 'none';
                alert('Game loaded successfully!');
              } catch (error) {
                alert('Failed to load game: ' + error.message);
              }
            });
            saveList.appendChild(saveItem);
          });
          
          saveList.style.display = 'block';
        } catch (error) {
          alert('Failed to get save list: ' + error.message);
        }
      });
      
      // Right-click prevention for proper game input handling
      document.addEventListener('contextmenu', event => event.preventDefault());
    });
  </script>
</body>
</html>